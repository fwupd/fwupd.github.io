<!--
SPDX-FileCopyrightText: fwupd Development Team

SPDX-License-Identifier: LGPL-2.1-or-later
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>FwupdPlugin &ndash; 1.0: Plugin: CCGX DMC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta charset="utf-8" />

  
  <meta property="og:type" content="website"/>

  
  <meta property="og:image:width" content="256"/>
  <meta property="og:image:height" content="256"/>
  <meta property="og:image:secure_url" content="org.freedesktop.fwupd.svg"/>
  <meta property="og:image:alt" content="FwupdPlugin-1.0"/>
  

  
  <meta property="og:title" content="FwupdPlugin: Plugin: CCGX DMC"/>
  <meta property="og:description" content="Reference for FwupdPlugin-1.0: Plugin: CCGX DMC"/>
  <meta name="twitter:title" content="FwupdPlugin: Plugin: CCGX DMC"/>
  <meta name="twitter:description" content="Reference for FwupdPlugin-1.0: Plugin: CCGX DMC"/>


  
  <meta name="twitter:card" content="summary"/>

  
  
  
  

  <link rel="stylesheet" href="style.css" type="text/css" />

  

  
  <script src="urlmap_fwupdplugin.js"></script>
  
  
  <script src="fzy.js"></script>
  <script src="search.js"></script>
  
  <script src="main.js"></script>

  
</head>

<body>
  <div id="body-wrapper" tabindex="-1">

    <nav class="sidebar devhelp-hidden">
      
      <div class="section">
        <a href="index.html"><img src="org.freedesktop.fwupd.svg" class="logo"/></a>
      </div>
      
      
      <div class="search section">
        <form id="search-form" autocomplete="off">
          <input id="search-input" type="text" name="do-not-autocomplete" placeholder="Click, or press 's' to search" autocomplete="off"/>
        </form>
      </div>
      
      <div class="section namespace">
        <h3><a href="index.html">FwupdPlugin</a></h3>
        <p>API Version: 1.0</p>
        
        <p>Library Version: 2.0.16</p>
        
      </div>
      
      
      <div class="section generator">
        <p>Generated by <a href="https://gitlab.gnome.org/GNOME/gi-docgen">gi-docgen</a> 2025.3</p>
      </div>
    </nav>

    <button id="btn-to-top" class="hidden"><span class="up-arrow"></span></button>

    
<section id="main" class="content">
  
  <h4 id="title" style="display:flex;">
    Plugin: CCGX DMC
    <a href="#title" class="anchor"></a>
    
  </h4>
  
  <section>
    <div class="docblock">
    <h2 id="introduction">Introduction<a class="md-anchor" href="#introduction" title="Permanent link"></a></h2>
<p>This plugin can flash firmware on Infineon (previously Cypress) CCGx <span class="caps">DMC</span> devices used in&nbsp;docks.</p>
<h2 id="supported-protocols">Supported Protocols<a class="md-anchor" href="#supported-protocols" title="Permanent link"></a></h2>
<p>This plugin supports the following protocol&nbsp;IDs:</p>
<ul>
<li><code>com.cypress.ccgx.dmc</code> (deprecated)</li>
<li><code>com.infineon.ccgx.dmc</code></li>
</ul>
<h3 id="dmc-factory-mode">DMC Factory Mode<a class="md-anchor" href="#dmc-factory-mode" title="Permanent link"></a></h3>
<p>Dock Management Controller devices have a <em>composite version</em> that is used to
describe the dock hardware as a whole, rather than enumerating and updating
each sub-component separately.
When OEMs have not followed the <span class="caps">IHV</span>-approved factory assembly process, the
composite number is unset and fwupd would display <code>0.0.0.0</code> in the <span class="caps">GUI</span> and
on the command&nbsp;line.</p>
<p>In fwupd &gt;= 1.8.11 we detect if the device is in <em>factory mode</em> and set the
version number to <code>0.0.0.1</code>.
When the device is in factory mode any valid upgrade will be allowed, which
means the user might be prompted to “update to” the same current version
installed on the dock.
For millions of devices this is both a waste of time, resources, and also
would inconvenience the user with an additional process for no&nbsp;reason.</p>
<p>For devices that have been shipped in factory mode, but would like to avoid
the update from <code>0.0.0.1</code> to the original version on the <span class="caps">LVFS</span>, can add a
quirk entry which matches the <code>devx</code> subcomponent <em>base version</em>.
In this example we match the parent <span class="caps">VID</span>, <span class="caps">PID</span>, the ComponentID and the <code>devx</code>
base firmware version, setting the parent composite version to <code>0.0.0.15</code>.</p>
<div class="codehilite"><pre><span></span><code>[USB\VID_2188&amp;PID_0035&amp;CID_05&amp;VER_3.3.1.69]
CcgxDmcCompositeVersion = 15
</code></pre></div>

<p>All the <code>devx</code> subcomponent versions can be shown on the console&nbsp;using:</p>
<div class="codehilite"><pre><span></span><code>sudo fwupdtool –plugins ccgx get-devices –show-all –verbose
</code></pre></div>

<h2 id="firmware-format">Firmware Format<a class="md-anchor" href="#firmware-format" title="Permanent link"></a></h2>
<p>In composite firmware topology, a single firmware image contains metadata and
firmware images of multiple devices including <span class="caps">DMC</span> itself in a dock&nbsp;system.</p>
<p>The daemon will decompress the cabinet archive and extract several firmware
blobs in a combined image file format. See 4.4.1 Single Composite
(Combined) Dock Image at <a href="https://www.cypress.com/file/387471/download">https://www.cypress.com/file/387471/download</a>
for more&nbsp;details.</p>
<h2 id="guid-generation">GUID Generation<a class="md-anchor" href="#guid-generation" title="Permanent link"></a></h2>
<p>These devices use the standard <span class="caps">USB</span> DeviceInstanceId values,&nbsp;e.g.</p>
<ul>
<li><code>USB\VID_1234&amp;PID_5678</code></li>
</ul>
<h2 id="update-behavior">Update Behavior<a class="md-anchor" href="#update-behavior" title="Permanent link"></a></h2>
<p>The device usually presents in runtime <span class="caps">HID</span> mode, but on detach re-enumerates
with with a <span class="caps">DMC</span> or <span class="caps">HPI</span> interface. On attach the device again re-enumerates
back to the runtime <span class="caps">HID</span>&nbsp;mode.</p>
<h2 id="vendor-id-security">Vendor ID Security<a class="md-anchor" href="#vendor-id-security" title="Permanent link"></a></h2>
<p>The vendor <span class="caps">ID</span> is set from the <span class="caps">USB</span> vendor, for example set to <code>USB:0x04B4</code></p>
<h2 id="quirk-use">Quirk Use<a class="md-anchor" href="#quirk-use" title="Permanent link"></a></h2>
<p>This plugin uses the following plugin-specific&nbsp;quirks:</p>
<h3 id="ccgxdmctriggercode">CcgxDmcTriggerCode<a class="md-anchor" href="#ccgxdmctriggercode" title="Permanent link"></a></h3>
<p><span class="caps">DMC</span> devices need a specified trigger code to request the device to update
the firmware and the trigger code depends on the&nbsp;devices.</p>
<div class="codehilite"><pre><span></span><code>0x0: Do not update
0x1: Update immediately
0x2: Update after port disconnected
</code></pre></div>

<p>Since:&nbsp;1.8.0</p>
<h3 id="ccgxdmccompositeversion">CcgxDmcCompositeVersion<a class="md-anchor" href="#ccgxdmccompositeversion" title="Permanent link"></a></h3>
<p>Set the parent composite version, as a 32 bit&nbsp;integer.</p>
<p>Since:&nbsp;1.8.11</p>
<h3 id="flagshas-manual-replug">Flags=has-manual-replug<a class="md-anchor" href="#flagshas-manual-replug" title="Permanent link"></a></h3>
<p>Needs a manual replug from the&nbsp;end-user.</p>
<h2 id="external-interface-access">External Interface Access<a class="md-anchor" href="#external-interface-access" title="Permanent link"></a></h2>
<p>This plugin requires read/write access to <code>/dev/bus/usb</code>.</p>
<h2 id="version-considerations">Version Considerations<a class="md-anchor" href="#version-considerations" title="Permanent link"></a></h2>
<p>This plugin has been available since fwupd version <code>1.5.0</code>.</p>
<h2 id="owners">Owners<a class="md-anchor" href="#owners" title="Permanent link"></a></h2>
<p>Anyone can submit a pull request to modify this plugin, but the following people should be
consulted before making major or functional&nbsp;changes:</p>
<ul>
<li>Brent Wu: <code>IfxBrent</code></li>
</ul>
    </div>
  </section>
</section>


    
<div id="toc" class="toc">
  <nav aria-labelledby="toc-title">
    <p id="toc-title">Content</p>
    <ul class="toc-list">
      
        
        <li class="toc-list-item"><a href="#introduction"><span class="link-text">Introduction</span></a></li>
          
        
        <li class="toc-list-item"><a href="#supported-protocols"><span class="link-text">Supported Protocols</span></a></li>
          
          <ul class="toc-list">
          
            <li class="toc-list-item"><a href="#dmc-factory-mode"><span class="link-text">DMC Factory Mode</span></a></li>
          
          </ul>
          
        
        <li class="toc-list-item"><a href="#firmware-format"><span class="link-text">Firmware Format</span></a></li>
          
        
        <li class="toc-list-item"><a href="#guid-generation"><span class="link-text">GUID Generation</span></a></li>
          
        
        <li class="toc-list-item"><a href="#update-behavior"><span class="link-text">Update Behavior</span></a></li>
          
        
        <li class="toc-list-item"><a href="#vendor-id-security"><span class="link-text">Vendor ID Security</span></a></li>
          
        
        <li class="toc-list-item"><a href="#quirk-use"><span class="link-text">Quirk Use</span></a></li>
          
          <ul class="toc-list">
          
            <li class="toc-list-item"><a href="#ccgxdmctriggercode"><span class="link-text">CcgxDmcTriggerCode</span></a></li>
          
            <li class="toc-list-item"><a href="#ccgxdmccompositeversion"><span class="link-text">CcgxDmcCompositeVersion</span></a></li>
          
            <li class="toc-list-item"><a href="#flagshas-manual-replug"><span class="link-text">Flags=has-manual-replug</span></a></li>
          
          </ul>
          
        
        <li class="toc-list-item"><a href="#external-interface-access"><span class="link-text">External Interface Access</span></a></li>
          
        
        <li class="toc-list-item"><a href="#version-considerations"><span class="link-text">Version Considerations</span></a></li>
          
        
        <li class="toc-list-item"><a href="#owners"><span class="link-text">Owners</span></a></li>
          
        
      
    </ul>
  </nav>
</div>


    <section id="search" class="content hidden"></section>

    <footer>
    
    </footer>
  </div>
</body>
</html>