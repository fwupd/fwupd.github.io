<!--
SPDX-FileCopyrightText: fwupd Development Team

SPDX-License-Identifier: LGPL-2.1-or-later
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>FwupdPlugin &ndash; 1.0: Plugin: NVMe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta charset="utf-8" />

  
  <meta property="og:type" content="website"/>

  
  <meta property="og:image:width" content="256"/>
  <meta property="og:image:height" content="256"/>
  <meta property="og:image:secure_url" content="org.freedesktop.fwupd.svg"/>
  <meta property="og:image:alt" content="FwupdPlugin-1.0"/>
  

  
  <meta property="og:title" content="FwupdPlugin: Plugin: NVMe"/>
  <meta property="og:description" content="Reference for FwupdPlugin-1.0: Plugin: NVMe"/>
  <meta name="twitter:title" content="FwupdPlugin: Plugin: NVMe"/>
  <meta name="twitter:description" content="Reference for FwupdPlugin-1.0: Plugin: NVMe"/>


  
  <meta name="twitter:card" content="summary"/>

  
  
  
  

  <link rel="stylesheet" href="style.css" type="text/css" />

  

  
  <script src="urlmap_fwupdplugin.js"></script>
  
  
  <script src="fzy.js"></script>
  <script src="search.js"></script>
  
  <script src="main.js"></script>

  
</head>

<body>
  <div id="body-wrapper" tabindex="-1">

    <nav class="sidebar devhelp-hidden">
      
      <div class="section">
        <a href="index.html"><img src="org.freedesktop.fwupd.svg" class="logo"/></a>
      </div>
      
      
      <div class="search section">
        <form id="search-form" autocomplete="off">
          <input id="search-input" type="text" name="do-not-autocomplete" placeholder="Click, or press 's' to search" autocomplete="off"/>
        </form>
      </div>
      
      <div class="section namespace">
        <h3><a href="index.html">FwupdPlugin</a></h3>
        <p>API Version: 1.0</p>
        
        <p>Library Version: 2.0.14</p>
        
      </div>
      
      
      <div class="section generator">
        <p>Generated by <a href="https://gitlab.gnome.org/GNOME/gi-docgen">gi-docgen</a> 2025.3</p>
      </div>
    </nav>

    <button id="btn-to-top" class="hidden"><span class="up-arrow"></span></button>

    
<section id="main" class="content">
  
  <h4 id="title" style="display:flex;">
    Plugin: NVMe
    <a href="#title" class="anchor"></a>
    
  </h4>
  
  <section>
    <div class="docblock">
    <h2 id="introduction">Introduction<a class="md-anchor" href="#introduction" title="Permanent link"></a></h2>
<p>This plugin adds support for NVMe storage hardware. Devices are enumerated from
the Identify Controller data structure and can be updated with appropriate
firmware file. Firmware is sent in 4kB chunks and activated on next&nbsp;reboot.</p>
<p>The device <span class="caps">GUID</span> is read from the vendor specific area and if not found then
generated from the trimmed model&nbsp;string.</p>
<h2 id="firmware-format">Firmware Format<a class="md-anchor" href="#firmware-format" title="Permanent link"></a></h2>
<p>The daemon will decompress the cabinet archive and extract a firmware blob in
an unspecified binary file&nbsp;format.</p>
<p>This plugin supports the following protocol <span class="caps">ID</span>:</p>
<ul>
<li><code>org.nvmexpress</code></li>
</ul>
<h2 id="guid-generation">GUID Generation<a class="md-anchor" href="#guid-generation" title="Permanent link"></a></h2>
<p>These device use the NVMe DeviceInstanceId values,&nbsp;e.g.</p>
<ul>
<li><code>NVME\VEN_1179&amp;DEV_010F</code></li>
</ul>
<p>The <span class="caps">FRU</span> globally unique identifier (<span class="caps">FGUID</span>) is also added from the <span class="caps">CNS</span> if set.
Please refer to this document for more details on how to add support for
<a href="https://nvmexpress.org/wp-content/uploads/NVM_Express_Revision_1.3.pdf"><span class="caps">FGUID</span></a>.</p>
<p>Additionally, an extra instance IDs containing the version may be&nbsp;added.</p>
<ul>
<li><code>NVME\VEN_1179&amp;DEV_010F&amp;VER_3B2QGXA7</code></li>
</ul>
<p>Additionally, for NVMe drives with Dell vendor firmware two extra GUIDs are&nbsp;added:</p>
<ul>
<li><code>STORAGE-DELL-${component-id}</code></li>
</ul>
<p>and any optional <span class="caps">GUID</span> saved in the vendor extension&nbsp;block.</p>
<h2 id="update-behavior">Update Behavior<a class="md-anchor" href="#update-behavior" title="Permanent link"></a></h2>
<p>The firmware is deployed when the device is in normal runtime mode, but it is
only activated when the system is either restarted or in some cases&nbsp;shutdown.</p>
<h2 id="quirk-use">Quirk Use<a class="md-anchor" href="#quirk-use" title="Permanent link"></a></h2>
<p>This plugin uses the following plugin-specific&nbsp;quirks:</p>
<h3 id="nvmeblocksize">NvmeBlockSize<a class="md-anchor" href="#nvmeblocksize" title="Permanent link"></a></h3>
<p>The block size used for NVMe&nbsp;writes</p>
<p>Since:&nbsp;1.1.3</p>
<h3 id="flagsforce-align"><code>Flags=force-align</code><a class="md-anchor" href="#flagsforce-align" title="Permanent link"></a></h3>
<p>Force alignment of the firmware&nbsp;file.</p>
<p>Since&nbsp;1.2.4</p>
<h3 id="flagscommit-ca3"><code>Flags=commit-ca3</code><a class="md-anchor" href="#flagscommit-ca3" title="Permanent link"></a></h3>
<p>Replace, and activate immediately rather than on next&nbsp;reset.</p>
<p>Since&nbsp;1.8.15</p>
<h2 id="vendor-id-security">Vendor ID Security<a class="md-anchor" href="#vendor-id-security" title="Permanent link"></a></h2>
<p>The vendor <span class="caps">ID</span> is set from the udev vendor, for example set to <code>NVME:0x1179</code></p>
<h2 id="external-interface-access">External Interface Access<a class="md-anchor" href="#external-interface-access" title="Permanent link"></a></h2>
<p>This plugin requires ioctl <code>NVME_IOCTL_ADMIN_CMD</code> access.</p>
<h2 id="version-considerations">Version Considerations<a class="md-anchor" href="#version-considerations" title="Permanent link"></a></h2>
<p>This plugin has been available since fwupd version <code>1.1.2</code>.</p>
    </div>
  </section>
</section>


    
<div id="toc" class="toc">
  <nav aria-labelledby="toc-title">
    <p id="toc-title">Content</p>
    <ul class="toc-list">
      
        
        <li class="toc-list-item"><a href="#introduction"><span class="link-text">Introduction</span></a></li>
          
        
        <li class="toc-list-item"><a href="#firmware-format"><span class="link-text">Firmware Format</span></a></li>
          
        
        <li class="toc-list-item"><a href="#guid-generation"><span class="link-text">GUID Generation</span></a></li>
          
        
        <li class="toc-list-item"><a href="#update-behavior"><span class="link-text">Update Behavior</span></a></li>
          
        
        <li class="toc-list-item"><a href="#quirk-use"><span class="link-text">Quirk Use</span></a></li>
          
          <ul class="toc-list">
          
            <li class="toc-list-item"><a href="#nvmeblocksize"><span class="link-text">NvmeBlockSize</span></a></li>
          
            <li class="toc-list-item"><a href="#flagsforce-align"><span class="link-text">Flags=force-align</span></a></li>
          
            <li class="toc-list-item"><a href="#flagscommit-ca3"><span class="link-text">Flags=commit-ca3</span></a></li>
          
          </ul>
          
        
        <li class="toc-list-item"><a href="#vendor-id-security"><span class="link-text">Vendor ID Security</span></a></li>
          
        
        <li class="toc-list-item"><a href="#external-interface-access"><span class="link-text">External Interface Access</span></a></li>
          
        
        <li class="toc-list-item"><a href="#version-considerations"><span class="link-text">Version Considerations</span></a></li>
          
        
      
    </ul>
  </nav>
</div>


    <section id="search" class="content hidden"></section>

    <footer>
    
    </footer>
  </div>
</body>
</html>